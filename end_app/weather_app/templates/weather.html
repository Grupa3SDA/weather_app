{% extends 'base.html' %}

{% block content %}

<form method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit">
</form>

{% if error_message %}
    <p>Error: {{ error_message }}</p>
{% else %}

{% if weather_data %}
<!--    Weather details here    -->
    <h2>Weather Informations</h2>
    <p>{{ weather_data.time }}</p>
    <h3>{{ weather_data.name }}, {{ weather_data.country }}</h3>
    <h2>
    <img src="http://openweathermap.org/img/wn/{{ weather_data.weather_icon }}.png"
         alt="Weather Icon"></p> {{ weather_data.temperature }} 째C
    </h2>
    <p>Feels like {{ weather_data.feels_like }} 째C cloudiness {{ weather_data.cloudiness }}% {{ weather_data.weather_description }}.</p>
    <p>{{ weather_data.wind_speed }}m/s from {{ weather_data.wind_deg }} {{ weather_data.pressure }}hPa</p>
    <p>Humidity: {{ weather_data.humidity }} Visibility: {{ weather_data.visibility }}</p>
    <p>Sunrise: {{ weather_data.sunrise }} Sunset: {{ weather_data.sunset }}</p>
{% endif %}

{% if air_pollution_data %}
<!--    Air Pollution details here    -->
    <h2>Air Quality Informations</h2>
    <p>Air quality index: {{ air_pollution_data.aqi }}</p>
    <p>Carbon Monoxide : {{ air_pollution_data.co }}</p>
    <p>Carbon Monoxide : {{ air_pollution_data.no }}</p>
    <p>Nitrogen Dioxide : {{ air_pollution_data.no2 }}</p>
    <p>Ozone : {{ air_pollution_data.o3 }}</p>
    <p>Sulfur Dioxide : {{ air_pollution_data.so2 }}</p>
    <p>Particulate Matter 2.5 : {{ air_pollution_data.pm2_5 }}</p>
    <p>Particulate Matter 10 : {{ air_pollution_data.pm10 }}</p>
    <p>Ammonia : {{ air_pollution_data.nh3 }}</p>
{% endif %}

{% if forecast_data %}
<!--    Forecast details Here   -->
    <h2>Forecast Informations</h2>
    {% for date, forecasts in forecast_data.items %}
        <!-- Use a div element for each day -->
        <div class="forecast-day">
            <h2>{{ date }}</h2>
            <div class="forecast-details">
            {% for forecast in forecasts %}
                <p>
                    <strong>{{ forecast.time }}</strong><br/>
                    <img src="http://openweathermap.org/img/wn/{{ forecast.weather_icon }}.png" alt="Weather Icon"><br/>
                    {{ forecast.temp_max }}째C/{{ forecast.temp_min }}째C<br/>
                    {{ forecast.weather_description }}
                </p>
            {% endfor %}
            </div>
        </div>
    {% endfor %}
{% endif %}

{% endif %}

{% endblock %}
