{% extends 'base.html' %}

{% block content %}

<form method="POST">
    {% csrf_token %}
    {{ city_form.as_p }}
    <input type="submit" value="Submit">
</form>

{% if error %}
    <p>Error: {{ error }}</p>
{% else %}

    {% if weather_data %}
    <!--    Weather details here    -->
        <h2>Weather Informations</h2>
        <p>{{ weather_data.time }}</p>
        <h3>{{ weather_data.name }}, {{ weather_data.country }}</h3>
        <h2>
        <img src="http://openweathermap.org/img/wn/{{ weather_data.weather_icon }}.png"
             alt="Weather Icon"></p> {{ weather_data.temperature }} 째C
        </h2>
        <p>Feels like {{ weather_data.feels_like }} 째C cloudiness {{ weather_data.cloudiness }}% {{ weather_data.weather_description }}.</p>
        <p>{{ weather_data.wind_speed }}m/s from {{ weather_data.wind_deg }} {{ weather_data.pressure }}hPa</p>
        <p>Humidity: {{ weather_data.humidity }} Visibility: {{ weather_data.visibility }}</p>
        <p>Sunrise: {{ weather_data.sunrise }} Sunset: {{ weather_data.sunset }}</p>
    {% endif %}

    {% if forecast_data %}
    <!--    Forecast details Here   -->
        <h2>Forecast Informations</h2>
        {% for date, forecasts in forecast_data.items %}
            <!-- Use a div element for each day -->
            <div class="forecast-day">
                <h2>{{ date }}</h2>
                <div class="forecast-details">
                {% for forecast in forecasts %}
                    <p>
                        <strong>{{ forecast.time }}</strong><br/>
                        <img src="http://openweathermap.org/img/wn/{{ forecast.weather_icon }}.png" alt="Weather Icon"><br/>
                        {{ forecast.temp_max }}째C/{{ forecast.temp_min }}째C<br/>
                        {{ forecast.weather_description }}
                    </p>
                {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% endif %}

{% endif %}

{% endblock %}
